<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <label for="id">id : </label>
    <input type="text" name="id" id="id" />
    <label for="pw">password : </label>
    <input type="text" name="pw" id="pw" />

    <button type="button" onclick="login()">로그인</button>
    <button type="button" onclick="checkLoggedIn()">로그인 확인</button>
    <button type="button" onclick="logout()">로그아웃</button>
  </body>
  <script>
    // 웹 스토리지 : 프론트에서 웹에 저장할 수 있는 저장소
    // key와 value 값으로 이루어진 데이터를 저장할 수 있음

    // 세션 스토리지 : 웹 페이지의 세션이 끝날 때 저장된 데이터가 모두 사라짐
    // 탭이 다른 경우, 탭을 닫은 경우 저장된 데이터를 사용할 수 없음
    // 로컬 스토리지 : 세션이 끝나더라도 데이터가 지워지지 않음
    // 탭이 다르거나, 해당 페이지를 나가도 데이터를 사용할 수 있음
    // 만료 시간을 정함

    const inputId = document.querySelector("#id");
    const inputPw = document.querySelector("#pw");

    const id = "aaaa";
    const pw = "1234";

    // 로그인 코드
    const login = () => {
      if (inputId.value && inputPw.value) {
        // 아이디와 비밀번호가 입력된 경우
        console.log(`id: ${inputId.value}, pw: ${inputPw.value}`);
        // 아이디 값이 저장된 아이디와 같은지 비교
        if (inputId.value === id) {
          // 비밀번호 값이 저장된 비밀번호와 같은지 비교
          if (inputPw.value === pw) {
            // 아이디와 비밀번호가 모두 같다면 세션스토리지에 'loggedIn'이라는 키의 value를 true로 저장
            // localStorage.setItem('키', '값') : 로컬 스토리지에 해당 키와 값을 저장
            localStorage.setItem("loggedIn", true);
            inputId.value = "";
            inputPw.value = "";
            alert("로그인을 성공했습니다.");
          } else {
            inputPw.value = "";
            alert("비밀번호를 확인해주세요.");
          }
        } else {
          inputId.value = "";
          inputPw.value = "";
          alert("아이디를 확인해주세요.");
        }
      } else {
        alert("아이디와 비밀번호를 입력해주세요.");
      }
    };

    // 로그인 유저인지 확인하는 함수
    const checkLoggedIn = () => {
      // localStorage.getItem('키') : 해당 키값을 가지고 있는 데이터가 로컬 스토리지에 있는지 확인, 값을 가져옴
      console.log(localStorage.getItem("loggedIn"));

      if (localStorage.getItem("loggedIn")) {
        console.log("로그인 유저입니다.");
      } else {
        console.log("로그인 되어있지 않은 유저입니다.");
      }
    };
    const logout = () => {
      // localStorage.removeItem('키') : 해당 기값을 가지고 있는 데이터를 로컬 스토리지에서 삭제
      localStorage.removeItem("loggedIn");
      alert("로그아웃 되었습니다.");
    };
  </script>
</html>
